import{a as c,o as e,q as ce,w as de}from"./chunk-NL6KNZEE-7k8Z-Yvn.js";import{c as P,B as V}from"./button-B8Hphn8C.js";import{I as E}from"./input-CXCdlBSn.js";import{u as ue,c as me,P as L,a as $,b as he}from"./index-DoSk4ZnV.js";import{c as Q,R as xe,I as fe}from"./index-Px20IDvx.js";import{u as pe,a as ge}from"./index-CLxoSw2P.js";import{a as be}from"./auth.service-CvP0mera.js";import{f as ve}from"./format.utils-DLgIyrhy.js";import{u as je}from"./localstorage.utils-DXDK1gxP.js";import{V as X,O as we}from"./index-Ce8uj8rm.js";import{c as q}from"./createLucideIcon-CHxtwjSd.js";import{S as G}from"./shield-CqFw4R22.js";import{E as K,a as B}from"./eye-off-BdLzCOdj.js";import"./index-BXveNCNt.js";import"./api.client-ze5lrY9D.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],O=q("mail",Ne);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],H=q("phone",ye);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],Ce=q("scan-face",Pe);var M="Tabs",[Te,We]=me(M,[Q]),W=Q(),[Se,z]=Te(M),Y=c.forwardRef((t,n)=>{const{__scopeTabs:m,value:i,onValueChange:l,defaultValue:h,orientation:s="horizontal",dir:d,activationMode:g="automatic",...b}=t,u=pe(d),[o,v]=ue({prop:i,onChange:l,defaultProp:h??"",caller:M});return e.jsx(Se,{scope:m,baseId:ge(),value:o,onValueChange:v,orientation:s,dir:u,activationMode:g,children:e.jsx(L.div,{dir:u,"data-orientation":s,...b,ref:n})})});Y.displayName=M;var Z="TabsList",ee=c.forwardRef((t,n)=>{const{__scopeTabs:m,loop:i=!0,...l}=t,h=z(Z,m),s=W(m);return e.jsx(xe,{asChild:!0,...s,orientation:h.orientation,dir:h.dir,loop:i,children:e.jsx(L.div,{role:"tablist","aria-orientation":h.orientation,...l,ref:n})})});ee.displayName=Z;var te="TabsTrigger",se=c.forwardRef((t,n)=>{const{__scopeTabs:m,value:i,disabled:l=!1,...h}=t,s=z(te,m),d=W(m),g=oe(s.baseId,i),b=re(s.baseId,i),u=i===s.value;return e.jsx(fe,{asChild:!0,...d,focusable:!l,active:u,children:e.jsx(L.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":b,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:g,...h,ref:n,onMouseDown:$(t.onMouseDown,o=>{!l&&o.button===0&&o.ctrlKey===!1?s.onValueChange(i):o.preventDefault()}),onKeyDown:$(t.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&s.onValueChange(i)}),onFocus:$(t.onFocus,()=>{const o=s.activationMode!=="manual";!u&&!l&&o&&s.onValueChange(i)})})})});se.displayName=te;var ae="TabsContent",ne=c.forwardRef((t,n)=>{const{__scopeTabs:m,value:i,forceMount:l,children:h,...s}=t,d=z(ae,m),g=oe(d.baseId,i),b=re(d.baseId,i),u=i===d.value,o=c.useRef(u);return c.useEffect(()=>{const v=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(v)},[]),e.jsx(he,{present:l||u,children:({present:v})=>e.jsx(L.div,{"data-state":u?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":g,hidden:!v,id:b,tabIndex:0,...s,ref:n,style:{...t.style,animationDuration:o.current?"0s":void 0},children:v&&h})})});ne.displayName=ae;function oe(t,n){return`${t}-trigger-${n}`}function re(t,n){return`${t}-content-${n}`}var Ie=Y,ke=ee,Ee=se,Le=ne;function Me({className:t,...n}){return e.jsx(Ie,{"data-slot":"tabs",className:P("flex flex-col gap-2",t),...n})}function _e({className:t,...n}){return e.jsx(ke,{"data-slot":"tabs-list",className:P("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",t),...n})}function U({className:t,...n}){return e.jsx(Ee,{"data-slot":"tabs-trigger",className:P("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function J({className:t,...n}){return e.jsx(Le,{"data-slot":"tabs-content",className:P("flex-1 outline-none",t),...n})}function Ae(){const[t,n]=c.useState(!1),[m,i]=c.useState(!1),[l,h]=c.useState(""),[s,d]=c.useState(Array(6).fill("")),[g,b]=c.useState(""),[u,o]=c.useState(""),[v,y]=c.useState(!1),[_,S]=c.useState("phone"),[A,I]=c.useState(!1),f=c.useRef([]),C=ce(),R=()=>X.error("Coming Soon.");c.useEffect(()=>{f.current=f.current.slice(0,6)},[]);const k=a=>{const r=ve(a.target.value);h(r)},D=(a,r)=>{var N;if(!/^\d*$/.test(r))return;const w=[...s];w[a]=r.slice(-1),d(w),I(!1),r&&a<5&&((N=f.current[a+1])==null||N.focus())},F=(a,r)=>{var w,N,T;if(r.key==="Backspace")if(!s[a]&&a>0){const p=[...s];p[a-1]="",d(p),(w=f.current[a-1])==null||w.focus()}else{const p=[...s];p[a]="",d(p)}else r.key==="ArrowLeft"&&a>0?(N=f.current[a-1])==null||N.focus():r.key==="ArrowRight"&&a<5&&((T=f.current[a+1])==null||T.focus())},x=a=>{var w,N;a.preventDefault();const r=a.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(r){const T=[...s];for(let p=0;p<r.length;p++)p<6&&(T[p]=r[p]);d(T),r.length<6?(w=f.current[r.length])==null||w.focus():(N=f.current[5])==null||N.focus()}},j=async()=>{try{y(!0);const a=l.replace(/\+|\s/g,""),r=await be.login({identifier:a,password:s.join("")});je.set("auth",{token:r.token,user:r.user}),r&&(X.success("Login successful!"),C("/0/home"))}catch(a){X.error("Login failed!"),y(!1),console.log(a)}finally{y(!1)}},ie=s.every(a=>a!==""),le=l.length>=14;return{showPassword:t,setShowPassword:n,showPin:m,setShowPin:i,phoneNumber:l,setPhoneNumber:h,email:g,setEmail:b,password:u,setPassword:o,isLoading:v,setIsLoading:y,activeTab:_,setActiveTab:S,pinError:A,pin:s,pinInputRefs:f,handlePhoneChange:k,handlePinInputChange:D,handlePinKeyDown:F,handlePinPaste:x,handleLogin:j,isPinComplete:ie,isPhoneComplete:le,notify:R,navigate:C}}function Re(){const{showPassword:t,setShowPassword:n,pin:m,pinInputRefs:i,handlePinInputChange:l,handlePinKeyDown:h,handlePinPaste:s,handleLogin:d,isPhoneComplete:g,isPinComplete:b,pinError:u,showPin:o,setShowPin:v,phoneNumber:y,handlePhoneChange:_,email:S,setEmail:A,password:I,setPassword:f,activeTab:C,setActiveTab:R,isLoading:k,notify:D,navigate:F}=Ae();return e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto px-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/ftcc-logo2.png",alt:"",className:"h-14 w-34"})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-400 via-blue-600 to-blue-800"}),e.jsx("div",{className:"p-4 pb-0",children:e.jsxs(Me,{defaultValue:"phone",value:C,onValueChange:R,className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-2 mb-4 p-1 bg-gray-100 rounded-lg",children:[e.jsxs(U,{value:"phone",className:"flex items-center justify-center gap-1.5 py-1.5 data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all text-xs",children:[e.jsx(H,{className:"w-3 h-3"}),"Phone & PIN"]}),e.jsxs(U,{value:"email",className:"flex items-center justify-center gap-1.5 py-1.5 data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-md transition-all text-xs",children:[e.jsx(O,{className:"w-3 h-3"}),"Email & Password"]})]}),e.jsxs(J,{value:"phone",className:"mt-0 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1.5 flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3 text-blue-600"}),"Mobile Number"]}),e.jsx(E,{type:"tel",placeholder:"+63 XXX XXX XXXX",value:y,onChange:_,className:"h-9 text-sm rounded-lg",maxLength:17})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1.5 flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3 text-blue-600"}),"6-Digit MPIN"]}),e.jsx("div",{className:"flex justify-between gap-1",children:[0,1,2,3,4,5].map(x=>e.jsx(E,{ref:j=>{i.current[x]=j},type:o?"text":"password",value:m[x],onChange:j=>l(x,j.target.value),onKeyDown:j=>h(x,j),onPaste:x===0?s:void 0,onFocus:j=>j.target.select(),className:P("w-9 h-9 text-center text-sm font-bold p-0 rounded-lg",u?"border-red-500 animate-shake":"",m[x]?"border-gray-400":"border-gray-200"),maxLength:1,inputMode:"numeric"},x))}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("button",{type:"button",onClick:()=>v(!o),className:"flex items-center gap-1 text-xs text-gray-500",children:[o?e.jsx(K,{className:"w-3 h-3"}):e.jsx(B,{className:"w-3 h-3"}),o?"Hide":"Show"]}),u&&e.jsx("p",{className:"text-xs text-red-500",children:"Invalid PIN"})]})]}),e.jsx(V,{className:P("w-full h-9 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg text-sm","relative",(!g||!b)&&"opacity-70 cursor-not-allowed"),disabled:!g||!b||k,onClick:d,children:k?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-0",children:"Login"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}):"Login"})]}),e.jsxs(J,{value:"email",className:"mt-0 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1.5 flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3 text-blue-600"}),"Email Address"]}),e.jsx(E,{type:"email",placeholder:"Enter your email",value:S,onChange:x=>A(x.target.value),className:"h-9 text-sm rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1.5 flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3 text-blue-600"}),"Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{type:t?"text":"password",placeholder:"Enter your password",value:I,onChange:x=>f(x.target.value),className:"h-9 text-sm pr-8 rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500",children:t?e.jsx(K,{className:"w-3 h-3"}):e.jsx(B,{className:"w-3 h-3"})})]})]}),e.jsx(V,{onClick:d,className:"w-full h-9 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg text-sm",disabled:!S||!I,children:"Login with Email"})]})]})}),e.jsxs("div",{className:"px-4 pb-4 pt-1",children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:C==="phone"?"Forgot MPIN?":"Forgot Password?"})}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-2 text-gray-400 text-[10px]",children:"Or"})})]}),e.jsxs(V,{onClick:D,variant:"outline",className:"w-full h-9 border border-gray-300 hover:border-blue-500 hover:bg-blue-50 rounded-lg flex items-center justify-center gap-1.5 text-xs",children:[e.jsx(Ce,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{children:"Login with Face Scan"})]}),e.jsx(we,{})]})]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>F("/0/register"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Create Account"})]}),e.jsxs("div",{className:"flex justify-center gap-2 text-[10px] text-gray-500",children:[e.jsx("button",{className:"hover:text-blue-600",children:"Terms"}),e.jsx("span",{children:"•"}),e.jsx("button",{className:"hover:text-blue-600",children:"Privacy"}),e.jsx("span",{children:"•"}),e.jsx("button",{className:"hover:text-blue-600",children:"Help"})]})]})]})})}const Ye=()=>[{title:"FTCC | User Login"},{name:"description",content:"Electronic Medical Records system for FTCC."}],Ze=de(function(){return e.jsx("div",{className:"",children:e.jsx(Re,{})})});export{Ze as default,Ye as meta};
