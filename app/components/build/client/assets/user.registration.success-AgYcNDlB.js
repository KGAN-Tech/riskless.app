import{a as m,q as h,o as e,w as x}from"./chunk-NL6KNZEE-7k8Z-Yvn.js";import{B as p}from"./button-B8Hphn8C.js";import{a as f}from"./auth.service-CvP0mera.js";import{u as l}from"./localstorage.utils-DXDK1gxP.js";import{d as g}from"./token.encyption-CFrckQ9H.js";import{V as d}from"./index-Ce8uj8rm.js";import{m as i}from"./proxy-CXrUghhr.js";import"./api.client-ze5lrY9D.js";function y(){const[t,n]=m.useState(null),r=h(),o=new URLSearchParams(window.location.search).get("tkn"),a=new URLSearchParams(window.location.search).get("type");m.useEffect(()=>{const s=o?decodeURIComponent(o):null;s&&a?g(s,a).then(c=>n(c)).catch(c=>{console.error("Failed to decode token",c),n({error:"Invalid or expired token"})}):n({error:"Missing or invalid parameters."})},[o,a]);const u=async()=>{try{if(a==="pkrf"&&(t!=null&&t.mobileNumber)&&(t!=null&&t.mpin)){const s=await f.login({identifier:t.mobileNumber,password:t.mpin});l.set("auth",{user:s.user,token:s.token}),r("/0/fpe"),d.success("Login successful.")}else a==="fpe"?(l.remove("fpeFormData"),l.remove("pkrfFormData"),r("/0/forms")):d.error("Invalid registration type or missing account data.")}catch(s){console.error(s),d.error("Unknown error occurred."),r("/0/")}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-green-50 to-white p-4",children:e.jsxs("div",{className:"w-full max-w-md mx-auto text-center space-y-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx(i.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"absolute inset-0",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",children:[e.jsx(i.circle,{cx:"50",cy:"50",r:"48",fill:"none",stroke:"#22c55e",strokeWidth:"4",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:"easeInOut"}}),e.jsx(i.circle,{cx:"50",cy:"50",r:"40",fill:"#22c55e",initial:{scale:0},animate:{scale:1},transition:{delay:.6,duration:.4}})]})}),e.jsx(i.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:e.jsx("svg",{width:"50%",height:"50%",viewBox:"0 0 52 52",children:e.jsx(i.path,{fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",d:"M14,27 L22,35 L38,15",initial:{pathLength:0},animate:{pathLength:1},transition:{delay:1,duration:.8,ease:"easeInOut"}})})})]})}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5,duration:.5},children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Congratulations!"}),e.jsx("p",{className:"mt-4 text-xl text-gray-600",children:a==="pkrf"?"You have successfully registered to FTCC and PKRF.":"You have successfully registered to FPE (First Patient Encounter) Form."}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Your registration has been confirmed and processed successfully."})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.8,duration:.5},className:"pt-6",children:e.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[e.jsx(p,{onClick:u,className:"px-8 py-6 text-lg bg-green-600 hover:bg-green-700",children:"Proceed"}),e.jsx(p,{onClick:()=>r("/0/login"),variant:"outline",className:"px-8 py-6 text-lg",children:"Back to Login"})]})})]})})}const P=()=>[{title:"Success "},{name:"description",content:"Electronic Medical Records system for FTCC."}],R=x(function(){return e.jsx("div",{className:"",children:e.jsx(y,{})})});export{R as default,P as meta};
