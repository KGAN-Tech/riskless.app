const i=()=>{try{return JSON.parse(localStorage.getItem("auth")||"{}").token||null}catch{return null}},S=()=>{try{return JSON.parse(localStorage.getItem("auth")||"{}").user||null}catch{return null}},l=location.hostname==="localhost",u=location.hostname.includes("dev"),h=location.hostname.includes("test"),p=l?"http://localhost:5000/api":"https://ftcc-api-d102dba193ad.herokuapp.com/api",d=t=>{const n=i();return{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...t}},g=async t=>{const n=t.headers.get("content-type");if(!t.ok){const e=n!=null&&n.includes("application/json")?await t.json().catch(()=>({})):await t.text().then(o=>({message:o})).catch(()=>({}));throw{status:t.status,...e}}return n!=null&&n.includes("application/json")?t.json():null},f=t=>{const n=new URLSearchParams;for(const o in t){const a=t[o];a!=null&&a!==""&&n.append(o,String(a))}const e=n.toString();return e?`?${e}`:""},s=async(t,n,e,o)=>{const a={method:t,headers:d(o),credentials:"include"};let c=`${p}${n}`;t==="GET"&&e?c+=f(e):e&&(a.body=JSON.stringify(e));const r=await fetch(c,a);return g(r)},m={get:t=>s("GET",t),getAll:(t,n)=>s("GET",t,n),post:(t,n)=>s("POST",t,n),put:(t,n)=>s("PUT",t,n),delete:t=>s("DELETE",t)};export{m as a,S as g};
